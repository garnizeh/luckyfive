basePath: /
definitions:
  handlers.CreateConfigRequest:
    properties:
      description:
        maxLength: 500
        type: string
      mode:
        enum:
        - simple
        - advanced
        type: string
      name:
        maxLength: 100
        minLength: 1
        type: string
      recipe:
        $ref: '#/definitions/services.Recipe'
      tags:
        maxLength: 200
        type: string
    required:
    - mode
    - name
    - recipe
    type: object
  handlers.CreateSweepConfigRequest:
    properties:
      config:
        $ref: '#/definitions/sweep.SweepConfig'
      description:
        maxLength: 500
        type: string
      name:
        maxLength: 100
        minLength: 1
        type: string
    required:
    - config
    - name
    type: object
  handlers.ImportRequest:
    properties:
      artifact_id:
        type: string
      sheet:
        description: Optional, defaults to first sheet
        type: string
    required:
    - artifact_id
    type: object
  handlers.UpdateSweepConfigRequest:
    properties:
      config:
        $ref: '#/definitions/sweep.SweepConfig'
      description:
        maxLength: 500
        type: string
      name:
        maxLength: 100
        minLength: 1
        type: string
    required:
    - config
    - name
    type: object
  handlers.UploadResponse:
    properties:
      artifact_id:
        type: string
      filename:
        type: string
      message:
        type: string
      size:
        type: integer
    type: object
  models.APIError:
    properties:
      code:
        type: string
      details:
        additionalProperties: {}
        type: object
      message:
        type: string
      request_id:
        type: string
    type: object
  models.BestConfigurationResponse:
    properties:
      metrics:
        additionalProperties:
          format: float64
          type: number
        type: object
      percentile:
        type: number
      rank:
        type: integer
      recipe:
        $ref: '#/definitions/models.RecipeResponse'
      simulation_id:
        type: integer
      sweep_id:
        type: integer
      variation_params:
        additionalProperties: {}
        type: object
    type: object
  models.Draw:
    properties:
      bola1:
        type: integer
      bola2:
        type: integer
      bola3:
        type: integer
      bola4:
        type: integer
      bola5:
        type: integer
      contest:
        type: integer
      draw_date:
        type: string
      imported_at:
        type: string
      raw_row:
        type: string
      source:
        type: string
    type: object
  models.LeaderboardEntryResponse:
    properties:
      created_at:
        type: string
      metric_value:
        type: number
      rank:
        type: integer
      recipe_name:
        type: string
      simulation_id:
        type: integer
    type: object
  models.RecipeResponse:
    properties:
      name:
        type: string
      parameters: {}
      version:
        type: string
    type: object
  models.SweepJobResponse:
    properties:
      base_contest_range:
        type: string
      completed_simulations:
        type: integer
      created_at:
        type: string
      created_by:
        type: string
      description:
        type: string
      failed_simulations:
        type: integer
      finished_at:
        type: string
      id:
        type: integer
      name:
        type: string
      run_duration_ms:
        type: integer
      started_at:
        type: string
      status:
        type: string
      sweep_config_json:
        type: string
      total_combinations:
        type: integer
    type: object
  models.SweepSimulationDetailResponse:
    properties:
      id:
        type: integer
      run_duration_ms:
        type: integer
      simulation_id:
        type: integer
      status:
        type: string
      summary_json:
        type: string
      sweep_job_id:
        type: integer
      variation_index:
        type: integer
      variation_params:
        type: string
    type: object
  models.SweepStatusResponse:
    properties:
      completed:
        type: integer
      failed:
        type: integer
      pending:
        type: integer
      running:
        type: integer
      simulations:
        items:
          $ref: '#/definitions/models.SweepSimulationDetailResponse'
        type: array
      sweep:
        $ref: '#/definitions/models.SweepJobResponse'
      total:
        type: integer
    type: object
  models.ValidationError:
    properties:
      code:
        type: string
      details:
        additionalProperties: {}
        type: object
      field_errors:
        additionalProperties:
          type: string
        type: object
      message:
        type: string
      request_id:
        type: string
    type: object
  models.VisualizationDataPointResponse:
    properties:
      metrics:
        additionalProperties:
          format: float64
          type: number
        type: object
      params:
        additionalProperties: {}
        type: object
    type: object
  models.VisualizationDataResponse:
    properties:
      data_points:
        items:
          $ref: '#/definitions/models.VisualizationDataPointResponse'
        type: array
      metrics:
        items:
          type: string
        type: array
      parameters:
        items:
          type: string
        type: array
      sweep_id:
        type: integer
    type: object
  services.CompareRequest:
    properties:
      description:
        type: string
      metrics:
        description: '["quina_rate", "avg_hits", "roi"]'
        items:
          type: string
        type: array
      name:
        type: string
      simulationIDs:
        items:
          format: int64
          type: integer
        type: array
    type: object
  services.ComparisonResult:
    properties:
      created_at:
        type: string
      description:
        type: string
      id:
        type: integer
      metrics:
        items:
          type: string
        type: array
      name:
        type: string
      rankings:
        additionalProperties:
          items:
            $ref: '#/definitions/services.SimulationRank'
          type: array
        description: metric -> ranked list
        type: object
      simulation_ids:
        items:
          type: integer
        type: array
      statistics:
        additionalProperties:
          $ref: '#/definitions/services.MetricStats'
        description: metric -> stats
        type: object
      winner_by_metric:
        additionalProperties:
          format: int64
          type: integer
        description: metric -> simulation_id
        type: object
    type: object
  services.CreateSweepRequest:
    properties:
      createdBy:
        type: string
      description:
        type: string
      endContest:
        type: integer
      name:
        type: string
      startContest:
        type: integer
      sweepConfig:
        $ref: '#/definitions/sweep.SweepConfig'
    type: object
  services.ImportResult:
    properties:
      artifact_id:
        type: string
      duration:
        type: string
      filename:
        type: string
      imported_at:
        type: string
      message:
        type: string
      rows_errors:
        type: integer
      rows_inserted:
        type: integer
      rows_skipped:
        type: integer
    type: object
  services.MetricStats:
    properties:
      count:
        type: integer
      max:
        type: number
      mean:
        type: number
      median:
        type: number
      min:
        type: number
      std_dev:
        type: number
    type: object
  services.Recipe:
    properties:
      name:
        type: string
      parameters:
        $ref: '#/definitions/services.RecipeParameters'
      version:
        type: string
    type: object
  services.RecipeParameters:
    properties:
      alpha:
        type: number
      beta:
        type: number
      delta:
        type: number
      enableEvolutionary:
        type: boolean
      gamma:
        type: number
      generations:
        type: integer
      mutationRate:
        type: number
      sim_preds:
        type: integer
      sim_prev_max:
        type: integer
    type: object
  services.SimulationRank:
    properties:
      percentile:
        type: number
      rank:
        type: integer
      simulation_id:
        type: integer
      simulation_name:
        type: string
      value:
        type: number
    type: object
  sweep.Constraint:
    properties:
      parameters:
        items:
          type: string
        type: array
      type:
        description: '"sum", "ratio", "min", "max"'
        type: string
      value:
        type: number
    type: object
  sweep.ParameterSweep:
    properties:
      name:
        description: e.g., "alpha", "sim_prev_max"
        type: string
      type:
        description: '"range", "discrete", "exponential"'
        type: string
      values: {}
    type: object
  sweep.Recipe:
    properties:
      name:
        type: string
      parameters:
        additionalProperties: {}
        type: object
      version:
        type: string
    type: object
  sweep.SweepConfig:
    properties:
      base_recipe:
        $ref: '#/definitions/sweep.Recipe'
      constraints:
        items:
          $ref: '#/definitions/sweep.Constraint'
        type: array
      description:
        type: string
      name:
        type: string
      parameters:
        items:
          $ref: '#/definitions/sweep.ParameterSweep'
        type: array
    type: object
host: localhost:8080
info:
  contact:
    email: devops@example.com
    name: LuckyFive API Support
    url: https://example.com/support
  description: Quina Lottery Simulation API â€” upload XLSX results, import into SQLite,
    and query draws.
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: https://example.com/terms/
  title: LuckyFive API
  version: "1.0"
paths:
  /api/v1/comparisons:
    get:
      consumes:
      - application/json
      description: Get a paginated list of comparisons
      parameters:
      - default: 50
        description: Maximum number of results
        in: query
        name: limit
        type: integer
      - default: 0
        description: Number of results to skip
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of comparisons
          schema:
            properties:
              comparisons:
                items:
                  properties:
                    created_at:
                      type: string
                    description:
                      type: string
                    id:
                      type: integer
                    metrics:
                      items:
                        type: string
                      type: array
                    name:
                      type: string
                    simulation_ids:
                      items:
                        type: integer
                      type: array
                  type: object
                type: array
              limit:
                type: integer
              offset:
                type: integer
            type: object
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: List comparisons
      tags:
      - comparisons
    post:
      consumes:
      - application/json
      description: Compare multiple simulations across various metrics
      parameters:
      - description: Comparison request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/services.CompareRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Comparison created successfully
          schema:
            $ref: '#/definitions/services.ComparisonResult'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Create a new simulation comparison
      tags:
      - comparisons
  /api/v1/comparisons/{id}:
    get:
      consumes:
      - application/json
      description: Retrieve a specific comparison with full results
      parameters:
      - description: Comparison ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Comparison details
          schema:
            $ref: '#/definitions/services.ComparisonResult'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/models.APIError'
        "404":
          description: Comparison not found
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Get comparison by ID
      tags:
      - comparisons
  /api/v1/configs:
    get:
      consumes:
      - application/json
      description: Retrieve a paginated list of simulation configurations
      parameters:
      - default: 50
        description: Maximum number of configs to return
        in: query
        name: limit
        type: integer
      - default: 0
        description: Number of configs to skip
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of configurations
          schema:
            properties:
              configs:
                items:
                  properties:
                    created_at:
                      type: string
                    created_by:
                      type: string
                    description:
                      type: string
                    id:
                      type: integer
                    is_default:
                      type: integer
                    last_used_at:
                      type: string
                    mode:
                      type: string
                    name:
                      type: string
                    recipe_json:
                      type: string
                    tags:
                      type: string
                    times_used:
                      type: integer
                    updated_at:
                      type: string
                  type: object
                type: array
              pagination:
                properties:
                  limit:
                    type: integer
                  offset:
                    type: integer
                type: object
            type: object
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: List configurations
      tags:
      - configs
    post:
      consumes:
      - application/json
      description: Create a new simulation configuration
      parameters:
      - description: Configuration data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.CreateConfigRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Configuration created
          schema:
            properties:
              created_at:
                type: string
              created_by:
                type: string
              description:
                type: string
              id:
                type: integer
              is_default:
                type: integer
              last_used_at:
                type: string
              mode:
                type: string
              name:
                type: string
              recipe_json:
                type: string
              tags:
                type: string
              times_used:
                type: integer
              updated_at:
                type: string
            type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Create a configuration
      tags:
      - configs
  /api/v1/configs/{id}:
    delete:
      consumes:
      - application/json
      description: Delete a simulation configuration
      parameters:
      - description: Configuration ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "204":
          description: Configuration deleted
        "400":
          description: Invalid configuration ID
          schema:
            $ref: '#/definitions/models.APIError'
        "404":
          description: Configuration not found
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Delete a configuration
      tags:
      - configs
    get:
      consumes:
      - application/json
      description: Retrieve details of a specific configuration by ID
      parameters:
      - description: Configuration ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Configuration details
          schema:
            properties:
              created_at:
                type: string
              created_by:
                type: string
              description:
                type: string
              id:
                type: integer
              is_default:
                type: integer
              last_used_at:
                type: string
              mode:
                type: string
              name:
                type: string
              recipe_json:
                type: string
              tags:
                type: string
              times_used:
                type: integer
              updated_at:
                type: string
            type: object
        "400":
          description: Invalid configuration ID
          schema:
            $ref: '#/definitions/models.APIError'
        "404":
          description: Configuration not found
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Get configuration details
      tags:
      - configs
    put:
      consumes:
      - application/json
      description: Update an existing simulation configuration
      parameters:
      - description: Configuration ID
        in: path
        name: id
        required: true
        type: integer
      - description: Updated configuration data
        in: body
        name: request
        required: true
        schema:
          properties:
            description:
              type: string
            name:
              type: string
            recipe:
              properties:
                algorithm:
                  type: string
                parameters:
                  type: object
                version:
                  type: string
              type: object
            tags:
              items:
                type: string
              type: array
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Configuration updated
          schema:
            properties:
              message:
                type: string
            type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/models.APIError'
        "404":
          description: Configuration not found
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Update a configuration
      tags:
      - configs
  /api/v1/configs/{id}/set-default:
    post:
      consumes:
      - application/json
      description: Set a configuration as the default for its mode
      parameters:
      - description: Configuration ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Default configuration set
          schema:
            properties:
              message:
                type: string
            type: object
        "400":
          description: Invalid configuration ID
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Set default configuration
      tags:
      - configs
  /api/v1/health:
    get:
      consumes:
      - application/json
      description: Returns 200 when the service is healthy
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Service health check
      tags:
      - health
  /api/v1/leaderboards/{metric}:
    get:
      consumes:
      - application/json
      description: Get ranked list of simulations for a specific metric with optional
        filtering
      parameters:
      - description: Metric name (quina_rate, quadra_rate, terno_rate, avg_hits, total_quinaz,
          total_quadras, total_ternos, hit_efficiency)
        in: path
        name: metric
        required: true
        type: string
      - default: all
        description: Filter by simulation mode
        enum:
        - simple
        - advanced
        - sweep
        - all
        in: query
        name: mode
        type: string
      - description: Filter simulations created after this date (RFC3339 format)
        in: query
        name: date_from
        type: string
      - description: Filter simulations created before this date (RFC3339 format)
        in: query
        name: date_to
        type: string
      - default: 50
        description: Maximum number of results
        in: query
        maximum: 1000
        name: limit
        type: integer
      - default: 0
        description: Number of results to skip
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Leaderboard results
          schema:
            properties:
              leaderboard:
                items:
                  $ref: '#/definitions/models.LeaderboardEntryResponse'
                type: array
              limit:
                type: integer
              offset:
                type: integer
              total:
                type: integer
            type: object
        "400":
          description: Invalid parameters
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Get leaderboard by metric
      tags:
      - leaderboards
  /api/v1/metrics:
    get:
      consumes:
      - application/json
      description: Returns comprehensive performance metrics including database stats,
        query performance, and HTTP statistics
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: Get system performance metrics
      tags:
      - metrics
  /api/v1/results:
    get:
      consumes:
      - application/json
      description: 'Returns a paginated list of draws. Query params: limit (default
        50), offset (default 0).'
      parameters:
      - description: Limit
        in: query
        name: limit
        type: integer
      - description: Offset
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: List draws with pagination
      tags:
      - results
  /api/v1/results/{contest}:
    get:
      consumes:
      - application/json
      description: Retrieve a single draw by contest number
      parameters:
      - description: Contest number
        in: path
        name: contest
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Draw'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Get a single draw
      tags:
      - results
  /api/v1/results/import:
    post:
      consumes:
      - application/json
      description: Triggers import for a previously uploaded artifact identified by
        artifact_id. Optional sheet name may be provided.
      parameters:
      - description: Import request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.ImportRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/services.ImportResult'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ValidationError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Trigger import for uploaded artifact
      tags:
      - results
  /api/v1/results/upload:
    post:
      consumes:
      - multipart/form-data
      description: Accepts a multipart/form-data upload containing an XLSX file. Returns
        an artifact_id to be used for import.
      parameters:
      - description: XLSX file
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.UploadResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Upload XLSX results file
      tags:
      - results
  /api/v1/simulations:
    get:
      consumes:
      - application/json
      description: Retrieve a paginated list of simulations
      parameters:
      - default: 10
        description: Maximum number of simulations to return
        in: query
        name: limit
        type: integer
      - default: 0
        description: Number of simulations to skip
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of simulations
          schema:
            properties:
              limit:
                type: integer
              offset:
                type: integer
              simulations:
                items:
                  properties:
                    created_at:
                      type: string
                    created_by:
                      type: string
                    end_contest:
                      type: integer
                    error_message:
                      type: string
                    error_stack:
                      type: string
                    finished_at:
                      type: string
                    id:
                      type: integer
                    log_blob:
                      items:
                        format: int32
                        type: integer
                      type: array
                    mode:
                      type: string
                    output_blob:
                      items:
                        format: int32
                        type: integer
                      type: array
                    output_name:
                      type: string
                    recipe_json:
                      type: string
                    recipe_name:
                      type: string
                    run_duration_ms:
                      type: integer
                    start_contest:
                      type: integer
                    started_at:
                      type: string
                    status:
                      type: string
                    summary_json:
                      type: string
                    worker_id:
                      type: string
                  type: object
                type: array
            type: object
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: List simulations
      tags:
      - simulations
  /api/v1/simulations/{id}:
    get:
      consumes:
      - application/json
      description: Retrieve details of a specific simulation by ID
      parameters:
      - description: Simulation ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Simulation details
          schema:
            properties:
              created_at:
                type: string
              created_by:
                type: string
              end_contest:
                type: integer
              error_message:
                type: string
              error_stack:
                type: string
              finished_at:
                type: string
              id:
                type: integer
              log_blob:
                items:
                  format: int32
                  type: integer
                type: array
              mode:
                type: string
              output_blob:
                items:
                  format: int32
                  type: integer
                type: array
              output_name:
                type: string
              recipe_json:
                type: string
              recipe_name:
                type: string
              run_duration_ms:
                type: integer
              start_contest:
                type: integer
              started_at:
                type: string
              status:
                type: string
              summary_json:
                type: string
              worker_id:
                type: string
            type: object
        "400":
          description: Invalid simulation ID
          schema:
            $ref: '#/definitions/models.APIError'
        "404":
          description: Simulation not found
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Get simulation details
      tags:
      - simulations
  /api/v1/simulations/{id}/cancel:
    post:
      consumes:
      - application/json
      description: Cancel a pending or running simulation
      parameters:
      - description: Simulation ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Cancellation successful
          schema:
            properties:
              message:
                type: string
            type: object
        "400":
          description: Invalid simulation ID
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Cancel a simulation
      tags:
      - simulations
  /api/v1/simulations/{id}/results:
    get:
      consumes:
      - application/json
      description: Retrieve paginated contest results for a specific simulation
      parameters:
      - description: Simulation ID
        in: path
        name: id
        required: true
        type: integer
      - default: 50
        description: Maximum number of results to return
        in: query
        name: limit
        type: integer
      - default: 0
        description: Number of results to skip
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Contest results
          schema:
            properties:
              limit:
                type: integer
              offset:
                type: integer
              results:
                items:
                  properties:
                    actual_numbers:
                      type: string
                    best_hits:
                      type: integer
                    best_prediction_index:
                      type: integer
                    best_prediction_numbers:
                      type: string
                    contest:
                      type: integer
                    id:
                      type: integer
                    predictions_json:
                      type: string
                    processed_at:
                      type: string
                    simulation_id:
                      type: integer
                  type: object
                type: array
              simulation_id:
                type: integer
            type: object
        "400":
          description: Invalid simulation ID
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Get simulation contest results
      tags:
      - simulations
  /api/v1/simulations/advanced:
    post:
      consumes:
      - application/json
      description: Create and optionally execute a simulation with custom configuration
      parameters:
      - description: Advanced simulation request
        in: body
        name: request
        required: true
        schema:
          properties:
            async:
              type: boolean
            config_description:
              type: string
            config_name:
              type: string
            end_contest:
              type: integer
            recipe:
              properties:
                algorithm:
                  type: string
                name:
                  type: string
                parameters:
                  properties:
                    alpha:
                      type: number
                    beta:
                      type: number
                    delta:
                      type: number
                    gamma:
                      type: number
                    sim_preds:
                      type: integer
                    sim_prev_max:
                      type: integer
                  type: object
                version:
                  type: string
              type: object
            save_as_config:
              type: boolean
            start_contest:
              type: integer
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Synchronous simulation completed
          schema:
            properties:
              simulation:
                properties:
                  created_at:
                    type: string
                  created_by:
                    type: string
                  end_contest:
                    type: integer
                  error_message:
                    type: string
                  error_stack:
                    type: string
                  finished_at:
                    type: string
                  id:
                    type: integer
                  log_blob:
                    items:
                      format: int32
                      type: integer
                    type: array
                  mode:
                    type: string
                  output_blob:
                    items:
                      format: int32
                      type: integer
                    type: array
                  output_name:
                    type: string
                  recipe_json:
                    type: string
                  recipe_name:
                    type: string
                  run_duration_ms:
                    type: integer
                  start_contest:
                    type: integer
                  started_at:
                    type: string
                  status:
                    type: string
                  summary_json:
                    type: string
                  worker_id:
                    type: string
                type: object
              simulation_id:
                type: integer
              status:
                type: string
            type: object
        "202":
          description: Asynchronous simulation queued
          schema:
            properties:
              message:
                type: string
              simulation_id:
                type: integer
              status:
                type: string
            type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Create an advanced simulation
      tags:
      - simulations
  /api/v1/simulations/simple:
    post:
      consumes:
      - application/json
      description: Create and optionally execute a simulation using a predefined configuration
        preset
      parameters:
      - description: Simulation request
        in: body
        name: request
        required: true
        schema:
          properties:
            async:
              type: boolean
            end_contest:
              type: integer
            preset:
              type: string
            start_contest:
              type: integer
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Synchronous simulation completed
          schema:
            properties:
              created_at:
                type: string
              created_by:
                type: string
              end_contest:
                type: integer
              error_message:
                type: string
              error_stack:
                type: string
              finished_at:
                type: string
              id:
                type: integer
              log_blob:
                items:
                  format: int32
                  type: integer
                type: array
              mode:
                type: string
              output_blob:
                items:
                  format: int32
                  type: integer
                type: array
              output_name:
                type: string
              recipe_json:
                type: string
              recipe_name:
                type: string
              run_duration_ms:
                type: integer
              start_contest:
                type: integer
              started_at:
                type: string
              status:
                type: string
              summary_json:
                type: string
              worker_id:
                type: string
            type: object
        "202":
          description: Asynchronous simulation queued
          schema:
            properties:
              message:
                type: string
              simulation_id:
                type: integer
              status:
                type: string
            type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/models.APIError'
        "404":
          description: Preset not found
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Create a simple simulation using a preset
      tags:
      - simulations
  /api/v1/sweep-configs:
    get:
      consumes:
      - application/json
      description: Retrieve a paginated list of sweep configurations
      parameters:
      - default: 50
        description: Maximum number of sweep configs to return
        in: query
        name: limit
        type: integer
      - default: 0
        description: Number of sweep configs to skip
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of sweep configurations
          schema:
            properties:
              pagination:
                properties:
                  limit:
                    type: integer
                  offset:
                    type: integer
                type: object
              sweep_configs:
                items:
                  properties:
                    config_json:
                      type: string
                    created_at:
                      type: string
                    created_by:
                      type: string
                    description:
                      type: string
                    id:
                      type: integer
                    last_used_at:
                      type: string
                    name:
                      type: string
                    times_used:
                      type: integer
                    updated_at:
                      type: string
                  type: object
                type: array
            type: object
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: List sweep configurations
      tags:
      - sweep-configs
    post:
      consumes:
      - application/json
      description: Create a new sweep configuration
      parameters:
      - description: Sweep configuration data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.CreateSweepConfigRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Sweep configuration created
          schema:
            properties:
              config_json:
                type: string
              created_at:
                type: string
              created_by:
                type: string
              description:
                type: string
              id:
                type: integer
              last_used_at:
                type: string
              name:
                type: string
              times_used:
                type: integer
              updated_at:
                type: string
            type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Create a sweep configuration
      tags:
      - sweep-configs
  /api/v1/sweep-configs/{id}:
    delete:
      consumes:
      - application/json
      description: Delete a sweep configuration
      parameters:
      - description: Sweep configuration ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Sweep configuration deleted
          schema:
            properties:
              message:
                type: string
            type: object
        "400":
          description: Invalid sweep configuration ID
          schema:
            $ref: '#/definitions/models.APIError'
        "404":
          description: Sweep configuration not found
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Delete a sweep configuration
      tags:
      - sweep-configs
    get:
      consumes:
      - application/json
      description: Retrieve details of a specific sweep configuration by ID
      parameters:
      - description: Sweep configuration ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Sweep configuration details
          schema:
            properties:
              config_json:
                type: string
              created_at:
                type: string
              created_by:
                type: string
              description:
                type: string
              id:
                type: integer
              last_used_at:
                type: string
              name:
                type: string
              times_used:
                type: integer
              updated_at:
                type: string
            type: object
        "400":
          description: Invalid sweep configuration ID
          schema:
            $ref: '#/definitions/models.APIError'
        "404":
          description: Sweep configuration not found
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Get sweep configuration details
      tags:
      - sweep-configs
    put:
      consumes:
      - application/json
      description: Update an existing sweep configuration
      parameters:
      - description: Sweep configuration ID
        in: path
        name: id
        required: true
        type: integer
      - description: Updated sweep configuration data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.UpdateSweepConfigRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Sweep configuration updated
          schema:
            properties:
              message:
                type: string
            type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/models.APIError'
        "404":
          description: Sweep configuration not found
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Update a sweep configuration
      tags:
      - sweep-configs
  /api/v1/sweeps:
    post:
      consumes:
      - application/json
      description: Create a parameter sweep job that will generate and execute multiple
        simulations
      parameters:
      - description: Sweep creation request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/services.CreateSweepRequest'
      produces:
      - application/json
      responses:
        "202":
          description: Sweep job created successfully
          schema:
            properties:
              base_contest_range:
                type: string
              completed_simulations:
                type: integer
              created_at:
                type: string
              created_by:
                type: string
              description:
                type: string
              failed_simulations:
                type: integer
              finished_at:
                type: string
              id:
                type: integer
              name:
                type: string
              run_duration_ms:
                type: integer
              started_at:
                type: string
              status:
                type: string
              sweep_config_json:
                type: string
              total_combinations:
                type: integer
            type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Create a new sweep job
      tags:
      - sweeps
  /api/v1/sweeps/{id}:
    get:
      consumes:
      - application/json
      description: Retrieve details of a specific sweep job
      parameters:
      - description: Sweep job ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Sweep job details
          schema:
            properties:
              base_contest_range:
                type: string
              completed_simulations:
                type: integer
              created_at:
                type: string
              created_by:
                type: string
              description:
                type: string
              failed_simulations:
                type: integer
              finished_at:
                type: string
              id:
                type: integer
              name:
                type: string
              run_duration_ms:
                type: integer
              started_at:
                type: string
              status:
                type: string
              sweep_config_json:
                type: string
              total_combinations:
                type: integer
            type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/models.APIError'
        "404":
          description: Sweep job not found
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Get sweep job by ID
      tags:
      - sweeps
  /api/v1/sweeps/{id}/best:
    get:
      consumes:
      - application/json
      description: Find the best performing configuration from a completed sweep job
        based on a specified metric
      parameters:
      - description: Sweep job ID
        in: path
        name: id
        required: true
        type: integer
      - description: Optimization metric (quina_rate, quadra_rate, terno_rate, avg_hits,
          total_quinaz, total_quadras, total_ternos, hit_efficiency)
        in: query
        name: metric
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Best configuration found
          schema:
            $ref: '#/definitions/models.BestConfigurationResponse'
        "400":
          description: Invalid ID or metric
          schema:
            $ref: '#/definitions/models.APIError'
        "404":
          description: Sweep job not found or not completed
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Get best configuration from sweep
      tags:
      - sweeps
  /api/v1/sweeps/{id}/cancel:
    post:
      consumes:
      - application/json
      description: Cancel a running sweep job and stop all pending simulations
      parameters:
      - description: Sweep job ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Sweep job cancelled successfully
          schema:
            properties:
              message:
                type: string
            type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/models.APIError'
        "404":
          description: Sweep job not found
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Cancel sweep job
      tags:
      - sweeps
  /api/v1/sweeps/{id}/results:
    get:
      consumes:
      - application/json
      description: Retrieve the results and simulation details of a completed sweep
        job
      parameters:
      - description: Sweep job ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Sweep job results
          schema:
            $ref: '#/definitions/models.SweepStatusResponse'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/models.APIError'
        "404":
          description: Sweep job not found
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Get sweep job results
      tags:
      - sweeps
  /api/v1/sweeps/{id}/status:
    get:
      consumes:
      - application/json
      description: Retrieve the current status and progress of a sweep job
      parameters:
      - description: Sweep job ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Sweep job status
          schema:
            $ref: '#/definitions/models.SweepStatusResponse'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/models.APIError'
        "404":
          description: Sweep job not found
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Get sweep job status
      tags:
      - sweeps
  /api/v1/sweeps/{id}/visualization:
    get:
      consumes:
      - application/json
      description: Export sweep data formatted for heatmaps, scatter plots, and other
        visualizations
      parameters:
      - description: Sweep job ID
        in: path
        name: id
        required: true
        type: integer
      - collectionFormat: csv
        description: Metrics to include (comma-separated). Defaults to quina_rate,avg_hits
        in: query
        items:
          type: string
        name: metrics
        type: array
      produces:
      - application/json
      responses:
        "200":
          description: Visualization data
          schema:
            $ref: '#/definitions/models.VisualizationDataResponse'
        "400":
          description: Invalid ID or metrics
          schema:
            $ref: '#/definitions/models.APIError'
        "404":
          description: Sweep job not found
          schema:
            $ref: '#/definitions/models.APIError'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.APIError'
      summary: Get sweep visualization data
      tags:
      - sweeps
schemes:
- http
swagger: "2.0"
